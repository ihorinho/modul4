{% extends 'default_layout.phtml.twig' %}

{% block title %}MVC | Books{% endblock title %}

{% block center %}
    <h3>Books</h3>
    <!--PAGINATION-->
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% set prev = pagination.getPrev() %}
            {% set next = pagination.getNext() %}
            {% set buttons = pagination.getButtons() %}
            {% if prev.isActive() %}
                <li><a href="/books/list/{{ page - 1 }}"><span aria-hidden="true">&laquo;</span></a></li>
            {% else %}
                <li class="disabled"><span aria-hidden="true">&laquo;</span></li>
            {% endif %}
            {% for button in buttons %}
                <li {{ page == button.getPage() ? 'class="active"' }}><a href="/books/list/{{ button.getPage() }}">{{ button.getText() }}</a></li>
            {% endfor %}
            {% if next.isActive() %}
                <li><a href="/books/list/{{ page + 1 }}"><span aria-hidden="true">&raquo;</span></a></li>
            {% else %}
                <li class="disabled"><span aria-hidden="true">&raquo;</span></li>
            {% endif %}
        </ul>
    </nav>
    <!--END Pagination-->

    <div class="row">
        {% for book in books %}
            <div class="col-md-3">
                <div class="thumbnail" style="height:450px;">
                    Id: {{ book.getId() }}<br/>
                    <img class="img-responsive show-all" src="/webroot/upload/avatars/{{ book.getId() }}.jpg"></img>
                    <div class="caption">
                        <h3>{{ book.getTitle() }}</h3>
                        <p>Author: {{ book.getAuthor() }}</p>
                        <p>Price: {{ book.getPrice() }} UAH</p>
                        <p>
                            <a href="/book-{{ book.getId() }}" class="btn btn-primary" role="button">Details</a>
                            <a href="/cart/add-{{ book.getId() }}" class="btn btn-default" role="button">Add to cart</a>
                        </p>
                    </div>
                </div>
            </div>

        {% endfor %}
    </div>

    <!--PAGINATION-->
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% set prev = pagination.getPrev() %}
            {% set next = pagination.getNext() %}
            {% set buttons = pagination.getButtons() %}
            {% if prev.isActive() %}
                <li><a href="/books/list/{{ page - 1 }}"><span aria-hidden="true">&laquo;</span></a></li>
            {% else %}
                <li class="disabled"><span aria-hidden="true">&laquo;</span></li>
            {% endif %}
            {% for button in buttons %}
                <li {{ page == button.getPage() ? 'class="active"' }}><a href="/books/list/{{ button.getPage() }}">{{ button.getText() }}</a></li>
            {% endfor %}
            {% if next.isActive() %}
                <li><a href="/books/list/{{ page + 1 }}"><span aria-hidden="true">&raquo;</span></a></li>
            {% else %}
                <li class="disabled"><span aria-hidden="true">&raquo;</span></li>
            {% endif %}
        </ul>
    </nav>
    <!--END Pagination-->
{% endblock center %}